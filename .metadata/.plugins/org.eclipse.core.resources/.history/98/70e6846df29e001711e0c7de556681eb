package model;

import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.image.ImageObserver;

import javax.swing.ImageIcon;

import customInterface.Attackable;
import customInterface.Direction;
import customInterface.JumpListener;
import gui.SNL;
import thread.JumpThread;

public class Player extends GameObj implements Direction, Attackable {

	private boolean isSelecter;
	private int dx, dy;
	private double imageIdx;
	private boolean isRight;

	private ImageIcon jumpRight[];
	int jumpIdx = 0;
	
	private JumpListener jumpListener;

	public Player(int x, int y, Image image) {
		super(x, y, image);
		isSelecter = false;
		dx = 5;
		dy = 0;
		isRight = true;
		imageIdx = 1;
		jumpRight = new ImageIcon[5];
		for (int i = 0; i < jumpRight.length; ++i) {
			String path = "../images/dino_jump_right.png";
			//// this.debuggable.debug(path);
			this.jumpRight[i] = new ImageIcon(path);
		} // 배열에 이동하는 이미지 추가

	}

	public Player(int x, int y, Image image, int dx, int dy) {
		super(x, y, image);
		isSelecter = false;
		this.dx = dx;
		this.dy = dy;
	}

	public Player(int x, int y, Image image, boolean isSelecter) {
		super(x, y, image);
		this.isSelecter = isSelecter;
		this.dx = 3;
		this.dy = 3;
	}

	public Player(int x, int y, Image image, int dx, int dy, boolean isSelecter) {
		super(x, y, image);
		this.isSelecter = isSelecter;
		this.dx = dx;
		this.dy = dy;
	}

	public void move(int direction) {
		// setPosX(getPosX() + dx);
		// setPosY(getPosY() + dy);
		String imageFile;
		switch (direction) {
		case LEFT:
			isRight = false;
			imageFile = "../images/dino_left" + String.valueOf((int) imageIdx % 3 + 1) + ".png";
			setImage(new ImageIcon(SNL.class.getResource(imageFile)).getImage());
			imageIdx += 0.3;
			setPosX(getPosX() - dx);
			break;
		case RIGHT:
			isRight = true;
			imageFile = "../images/dino_right" + String.valueOf((int) imageIdx % 3 + 1) + ".png";
			setImage(new ImageIcon(SNL.class.getResource(imageFile)).getImage());
			imageIdx += 0.3;
			setPosX(getPosX() + dx);
			break;
		case UP:
			// TODO : JUMP
//			new JumpThread(new JumpListener() {
//				
//				@Override
//				public void jumpTimeEnded() {
//					// TODO Auto-generated method stub
//					
//				}
//				
//				@Override
//				public void jumpTimeArrived(int jumpIdx, int jumpy) {
//					// TODO Auto-generated method stub
//					
//				}
//			}).start();
			break;
		case DOWN:
			// TODO : ENTER THE DOOR
			setPosY(getPosY() + dy);
			break;
		}

	}

	public void draw(Graphics g) {
		Graphics2D g2d = (Graphics2D) g;
		g.drawString("가나다", getPosX(), getPosY());
		g2d.drawImage(getImage(), getPosX(), getPosY(), null);
//		System.out.println("(" + getPosX() + "," + getPosY() + ")");
	}

	public void setDx(int dx) {
		this.dx = dx;
	}

	public void setDy(int dy) {
		this.dy = dy;
	}

	public int getJumpIdx() {
		return this.jumpIdx;
	}

	public void setJumpIdx(int jumpIdx) {
		this.jumpIdx = jumpIdx;
	}

	public boolean isRight() {
		return isRight;
	}

	public void addX(int add) {
		setPosX(getPosX() + add);
	}

	public void addY(int add) {
		setPosY(getPosY() + add);
	}
	
//	public void setJumpListener(JumpListener jumpListener) {
//		this.jumpListener = jumpListener;
//	}

	@Override
	public void attack() {
		// TODO 충돌처리
		System.out.println("attack");
		if (isRight)
			setImage(new ImageIcon(SNL.class.getResource("../images/dino_attack_right.png")).getImage());
		else
			setImage(new ImageIcon(SNL.class.getResource("../images/dino_attack_left.png")).getImage());
	}

	public Image getJumpImage() {
		// index별 이미지 return
		if (isRight) {
			switch (jumpIdx) {
			case 0:
				return jumpRight[0].getImage();
			case 1:
				return jumpRight[1].getImage();
			case 2:
				return jumpRight[1].getImage();
			case 3:
				return jumpRight[1].getImage();
			case 4:
				return jumpRight[2].getImage();
			case 5:
				return jumpRight[3].getImage();
			case 6:
				return jumpRight[3].getImage();
			case 7:
				return jumpRight[3].getImage();
			case 8:
				return jumpRight[4].getImage();
			case 9:
				return jumpRight[4].getImage();

			default:
				return jumpRight[0].getImage();
			}
		} else {
			// TODO : 왼쪽
		}
		return null;
	}



}
